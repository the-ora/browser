#!/bin/bash

echo "üé® Running SwiftFormat..."
if ! command -v swiftformat >/dev/null 2>&1; then
    echo "‚ö†Ô∏è SwiftFormat not installed. Install with 'brew install swiftformat' or execute './setup.sh.'"
    exit 1
fi
swiftformat . --quiet
if [ $? -ne 0 ]; then
    echo "‚ùå SwiftFormat failed."
    exit 1
fi

echo "üîç Running SwiftLint..."
if ! command -v swiftlint >/dev/null 2>&1; then
    echo "‚ö†Ô∏è SwiftLint not installed. Install with 'brew install swiftlint' or execute './setup.sh.'"
    exit 1
fi
swiftlint --quiet
swiftlint lint --fix --strict
if [ $? -ne 0 ]; then
    echo "‚ùå SwiftLint failed."
    exit 1
fi

git add .

echo "‚úÖ Pre-commit checks passed!"
